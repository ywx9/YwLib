#pragma once // clang-format off
#include "abc.h"
#include "cstdarg"

#define BUFSIZ 512
#define EOF (-1)
#define _IOFBF 0x0000
#define _IOLBF 0x0040
#define _IONBF 0x0004
#define L_tmpnam 260
#define SEEK_CUR 1
#define SEEK_END 2
#define SEEK_SET 0
#define FILENAME_MAX 260
#define FOPEN_MAX 20
#define TMP_MAX 2147483647

#define __ywstd_cstdio_va(x, call) \
  va_list args; __crt_va_start(args, x); \
  const int result = call;               \
  __crt_va_end(args);                    \
  return result

__ywstd_cfunc_begin_poqpoqpoqpoqpoqpoqpoqpoqpoqpoqpoqpoqpoqpoqpoqpoqpoqpoqpoqpoq

using fpos_t = long long;

void __cdecl clearerr(FILE*);
int __cdecl fclose(FILE*);
int __cdecl feof(FILE*);
int __cdecl ferror(FILE*);
int __cdecl fflush(FILE*);
int __cdecl fgetc(FILE*);
int __cdecl fgetpos(FILE*, fpos_t*);
char* __cdecl fgets(char*, int, FILE*);
FILE* __cdecl fopen(const char*, const char*);
int __cdecl fputc(int, FILE*);
int __cdecl fputs(const char*, FILE*);
size_t __cdecl fread(void*, size_t, size_t, FILE*);
FILE* __cdecl freopen(const char*, const char*, FILE*);
int __cdecl fsetpos(FILE*, fpos_t const*);
int __cdecl fseek(FILE*, long, int);
long __cdecl ftell(FILE*);
size_t __cdecl fwrite(const void*, size_t, size_t, FILE*);
int __cdecl getc(FILE*);
int __cdecl getchar();
void __cdecl perror(const char*);
int __cdecl putc(int, FILE*);
int __cdecl putchar(int);
int __cdecl puts(const char*);

int __cdecl remove(const char*);
int __cdecl rename(const char*, const char*);

FILE* __cdecl tmpfile();
char* tmpnam(char*);

void __cdecl rewind(FILE*);
void __cdecl setbuf(FILE*, char*);
int __cdecl setvbuf(FILE*, char*, int, size_t);
int __cdecl ungetc(int, FILE*);

#pragma region VFSCANF

int __cdecl __stdio_common_vfscanf(unsigned __int64, FILE*, const char*, _locale_t, va_list);

inline int __cdecl vfscanf(FILE* const stream, const char* fmt, va_list args) {
  return __stdio_common_vfscanf(_CRT_INTERNAL_LOCAL_SCANF_OPTIONS, stream, fmt, nullptr, args);
}

inline int __cdecl vscanf(const char* fmt, va_list args) { return vfscanf(stdin, fmt, args); }

inline int __cdecl fscanf(FILE* const stream, const char* fmt, ...) {
  __ywstd_cstdio_va(fmt, (vfscanf(stream, fmt, args)));
}

inline int __cdecl scanf(const char* fmt, ...) {
  __ywstd_cstdio_va(fmt, (vfscanf(stdin, fmt, args)));
}

#pragma endregion

#pragma region VSSCANF

int __cdecl __stdio_common_vsscanf(
  unsigned __int64, const char*, size_t, const char*, _locale_t, va_list);

inline int __cdecl vsscanf(const char* buffer, const char* fmt, va_list args) {
  return __stdio_common_vsscanf(_CRT_INTERNAL_LOCAL_SCANF_OPTIONS, buffer, (size_t)-1, fmt, nullptr, args);
}

inline int __cdecl sscanf(const char* buffer, const char* fmt, ...) {
  __ywstd_cstdio_va(fmt, (vsscanf(buffer, fmt, args)));
}

#pragma endregion

#pragma region VFPRINTF

int __cdecl __stdio_common_vfprintf(unsigned __int64, FILE*, const char*, _locale_t, va_list);

inline int __cdecl vfprintf(FILE* const stream, const char* fmt, va_list args) {
  return __stdio_common_vfprintf(_CRT_INTERNAL_LOCAL_PRINTF_OPTIONS, stream, fmt, nullptr, args);
}

inline int __cdecl vprintf(const char* fmt, va_list args) {
  return vfprintf(stdout, fmt, args);
}

inline int __cdecl fprintf(FILE* const stream, const char* fmt, ...) {
  __ywstd_cstdio_va(fmt, (vfprintf(stream, fmt, args)));
}

inline int __cdecl printf(const char* fmt, ...) {
  __ywstd_cstdio_va(fmt, (vfprintf(stdout, fmt, args)));
}

#pragma endregion

#pragma region VSPRINTF

int __cdecl __stdio_common_vsprintf(unsigned __int64, char*, size_t, const char*, _locale_t, va_list);

inline int __cdecl vsnprintf(char* buffer, size_t count, const char* fmt, va_list args) {
  const auto options = _CRT_INTERNAL_LOCAL_PRINTF_OPTIONS | _CRT_INTERNAL_PRINTF_STANDARD_SNPRINTF_BEHAVIOR;
  const int result = __stdio_common_vsprintf(options, buffer, count, fmt, NULL, args);
  return result < 0 ? -1 : result;
}

inline int __cdecl vsprintf(char* buffer, const char* fmt, va_list args) {
  const auto options = _CRT_INTERNAL_LOCAL_PRINTF_OPTIONS | _CRT_INTERNAL_PRINTF_LEGACY_VSPRINTF_NULL_TERMINATION;
  const int result = __stdio_common_vsprintf(options, buffer, (size_t)-1, fmt, nullptr, args);
  return result < 0 ? -1 : result;
}

inline int __cdecl snprintf(char* buffer, size_t count, const char* fmt, ...) {
  __ywstd_cstdio_va(fmt, (vsnprintf(buffer, count, fmt, args)));
}

inline int __cdecl sprintf(char* buffer, const char* fmt, ...) {
  __ywstd_cstdio_va(fmt, (vsprintf(buffer, fmt, args)));
}

#pragma endregion

__ywstd_cfunc_end___bodbodbodbodbodbodbodbodbodbodbodbodbodbodbodbodbodbodbodbod

__ywstd_export namespace std {
using __ywstd_cfunc clearerr;
using __ywstd_cfunc fclose;
using __ywstd_cfunc feof;
using __ywstd_cfunc ferror;
using __ywstd_cfunc fflush;
using __ywstd_cfunc fgetc;
using __ywstd_cfunc fgetpos;
using __ywstd_cfunc fgets;
using __ywstd_cfunc fopen;
using __ywstd_cfunc fputc;
using __ywstd_cfunc fputs;
using __ywstd_cfunc fread;
using __ywstd_cfunc freopen;
using __ywstd_cfunc fsetpos;
using __ywstd_cfunc fseek;
using __ywstd_cfunc ftell;
using __ywstd_cfunc fwrite;
using __ywstd_cfunc getc;
using __ywstd_cfunc getchar;
using __ywstd_cfunc perror;
using __ywstd_cfunc putc;
using __ywstd_cfunc putchar;
using __ywstd_cfunc puts;
using __ywstd_cfunc remove;
using __ywstd_cfunc rename;
using __ywstd_cfunc rewind;
using __ywstd_cfunc setbuf;
using __ywstd_cfunc setvbuf;
using __ywstd_cfunc tmpfile;
using __ywstd_cfunc tmpnam;
using __ywstd_cfunc ungetc;

using __ywstd_cfunc vfscanf;
using __ywstd_cfunc vscanf;
using __ywstd_cfunc fscanf;
using __ywstd_cfunc scanf;

using __ywstd_cfunc vsscanf;
using __ywstd_cfunc sscanf;

using __ywstd_cfunc vfprintf;
using __ywstd_cfunc vprintf;
using __ywstd_cfunc fprintf;
using __ywstd_cfunc printf;

using __ywstd_cfunc vsnprintf;
using __ywstd_cfunc vsprintf;
using __ywstd_cfunc snprintf;
using __ywstd_cfunc sprintf;
}

////////////////////////////////////////////////////////////////////////////////
// for <string>
extern "C" {
inline int __cdecl _scprintf(const char* fmt, ...) {
  __ywstd_cstdio_va(fmt, (__ywstd_cfunc vsnprintf(nullptr, 0, fmt, args)));
}

int __cdecl __stdio_common_vsprintf_s(unsigned __int64, char*, size_t, const char*, __ywstd_cfunc _locale_t, va_list);

inline int __cdecl vsprintf_s(char* buffer, size_t count, const char* fmt, va_list args) {
  const auto options = _CRT_INTERNAL_LOCAL_PRINTF_OPTIONS;
  const int result = __stdio_common_vsprintf_s(options, buffer, count, fmt, nullptr, args);
  return result < 0 ? -1 : result;
}

inline int __cdecl sprintf_s(char* buffer, size_t count, const char* fmt, ...) {
  __ywstd_cstdio_va(fmt, (vsprintf_s(buffer, count, fmt, args)));
}
}

////////////////////////////////////////////////////////////////////////////////
// for <fstream>

extern "C" {
int __cdecl _fseeki64(FILE*, __int64, int);
int __cdecl _get_stream_buffer_pointers(FILE*, char***, char***, int**);
}
