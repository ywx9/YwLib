#pragma once // clang-format off
#include "abc.h"

#ifndef NULL
#define NULL 0
#endif

#ifndef WCHAR_MIN
#define WCHAR_MIN 0
#define WCHAR_MAX 0xFFFF
#endif

#ifndef WEOF
#define WEOF (std::wint_t)(0xFFFF)
#endif

extern "C" {
__ywlib_begin;

using wint_t = unsigned short;
wchar_t* __cdecl wcscpy(wchar_t*, const wchar_t*);
wchar_t* __cdecl wcsncpy(wchar_t*, const wchar_t*, size_t);
wchar_t* __cdecl wcscat(wchar_t*, const wchar_t*);
wchar_t* __cdecl wcsncat(wchar_t*, const wchar_t*, size_t);
size_t __cdecl wcsxfrm(wchar_t*, const wchar_t*, size_t);
size_t __cdecl wcslen(const wchar_t*);
int __cdecl wcscmp(const wchar_t*, const wchar_t*);
int __cdecl wcsncmp(const wchar_t*, const wchar_t*, size_t);
int __cdecl wcscoll(const wchar_t*, const wchar_t*);
const wchar_t* __cdecl wcschr(const wchar_t*, wchar_t);
const wchar_t* __cdecl wcsrchr(const wchar_t*, wchar_t);
size_t __cdecl wcsspn(const wchar_t*, const wchar_t*);
size_t __cdecl wcscspn(const wchar_t*, const wchar_t*);
const wchar_t* __cdecl wcspbrk(const wchar_t*, const wchar_t*);
const wchar_t* __cdecl wcsstr(const wchar_t*, const wchar_t*);
wchar_t* __cdecl wcstok(wchar_t*, const wchar_t*);
const wchar_t* __cdecl wmemchr(const wchar_t*, wchar_t, size_t);
int __cdecl wmemcmp(const wchar_t*, const wchar_t*, size_t);
wchar_t* __cdecl wmemcpy(wchar_t*, const wchar_t*, size_t);
wchar_t* __cdecl wmemmove(wchar_t*, const wchar_t*, size_t);
wchar_t* __cdecl wmemset(wchar_t*, wchar_t, size_t);
int __cdecl mbsinit(const mbstate_t*);
wint_t __cdecl btowc(int);
int __cdecl wctob(wint_t);
size_t __cdecl mbrlen(const char*, size_t, mbstate_t*);
size_t __cdecl mbrtowc(wchar_t*, const char*, size_t, mbstate_t*);
size_t __cdecl wcrtomb(char*, wchar_t, mbstate_t*);
size_t __cdecl mbsrtowcs(wchar_t*, const char**, size_t, mbstate_t*);
size_t __cdecl wcsrtombs(char*, const wchar_t**, size_t, mbstate_t*);
wint_t __cdecl getwc(FILE*);
wint_t __cdecl fgetwc(FILE*);
wchar_t* __cdecl fgetws(wchar_t*, int, FILE*);
wint_t __cdecl putwc(wint_t, FILE*);
wint_t __cdecl fputwc(wint_t, FILE*);
int __cdecl fputws(const wchar_t*, FILE*);
wint_t __cdecl getwchar();
wint_t __cdecl putwchar(wint_t);
wint_t __cdecl ungetwc(wint_t, FILE*);
int __cdecl fwide(FILE*, int);
long __cdecl wcstol(const wchar_t*, wchar_t**, int);
long long __cdecl wcstoll(const wchar_t*, wchar_t**, int);
unsigned long __cdecl wcstoul(const wchar_t*, wchar_t**, int);
unsigned long long __cdecl wcstoull(const wchar_t*, wchar_t**, int);
float __cdecl wcstof(const wchar_t*, wchar_t**);
double __cdecl wcstod(const wchar_t*, wchar_t**);
long double __cdecl wcstold(const wchar_t*, wchar_t**);
size_t __cdecl wcsftime(wchar_t*, size_t, const wchar_t*, const tm*);

#define __ywlib_cwchar_va(x, call) \
va_list args; __crt_va_start(args, x); const int result = call; __crt_va_end(args); return result

int __cdecl __stdio_common_vswscanf(unsigned __int64, const wchar_t*, size_t, const wchar_t*, _locale_t, va_list);
inline int __cdecl vswscanf(const wchar_t* buffer, const wchar_t* format, va_list args) {
  return __stdio_common_vswscanf(_CRT_INTERNAL_LOCAL_SCANF_OPTIONS, buffer, (size_t)-1, format, nullptr, args); }
inline int __cdecl swscanf(const wchar_t* buffer, const wchar_t* format, ...) {
  __ywlib_cwchar_va(format, (vswscanf(buffer, format, args))); }

int __cdecl __stdio_common_vfwscanf(unsigned __int64, FILE*, const wchar_t*, _locale_t, va_list);
inline int __cdecl vfwscanf(FILE* const stream, const wchar_t* format, va_list args) {
  return __stdio_common_vfwscanf(_CRT_INTERNAL_LOCAL_SCANF_OPTIONS, stream, format, nullptr, args); }
inline int __cdecl vwscanf(const wchar_t* format, va_list args) {
  return vfwscanf(stdin, format, args); }
inline int __cdecl fwscanf(FILE* const stream, const wchar_t* format, ...) {
  __ywlib_cwchar_va(format, (vfwscanf(stream, format, args))); }
inline int __cdecl wscanf(const wchar_t* format, ...) {
  __ywlib_cwchar_va(format, (vfwscanf(stdin, format, args))); }

int __cdecl __stdio_common_vswprintf(unsigned __int64, wchar_t*, size_t, const wchar_t*, _locale_t, va_list);
inline int __cdecl vswprintf(wchar_t* buffer, size_t count, const wchar_t* format, va_list args) {
  const int result = __stdio_common_vswprintf(_CRT_INTERNAL_LOCAL_PRINTF_OPTIONS, buffer, count, format, nullptr, args);
  return result < 0 ? -1 : result; }
inline int __cdecl swprintf(wchar_t* buffer, const wchar_t* format, ...) {
  __ywlib_cwchar_va(format, (vswprintf(buffer, (size_t)-1, format, args))); }

int __cdecl __stdio_common_vfwprintf(unsigned __int64, FILE*, const wchar_t*, _locale_t, va_list);
inline int __cdecl vfwprintf(FILE* const stream, const wchar_t* format, va_list args) {
  return __stdio_common_vfwprintf(_CRT_INTERNAL_LOCAL_PRINTF_OPTIONS, stream, format, nullptr, args); }
inline int __cdecl vwprintf(const wchar_t* format, va_list args) {
  return vfwprintf(stdout, format, args); }
inline int __cdecl fwprintf(FILE* const stream, const wchar_t* format, ...) {
  __ywlib_cwchar_va(format, (vfwprintf(stream, format, args))); }
inline int __cdecl wprintf(const wchar_t* format, ...) {
  __ywlib_cwchar_va(format, (vfwprintf(stdout, format, args))); }

__ywlib_end;
}
__ywlib_export namespace std {
using wint_t = unsigned short;
using __ywlib_global wcscpy;
using __ywlib_global wcsncpy;
using __ywlib_global wcscat;
using __ywlib_global wcsncat;
using __ywlib_global wcsxfrm;
using __ywlib_global wcslen;
using __ywlib_global wcscmp;
using __ywlib_global wcsncmp;
using __ywlib_global wcscoll;
using __ywlib_global wcschr;
using __ywlib_global wcsrchr;
using __ywlib_global wcsspn;
using __ywlib_global wcscspn;
using __ywlib_global wcspbrk;
using __ywlib_global wcsstr;
using __ywlib_global wcstok;
using __ywlib_global wmemchr;
using __ywlib_global wmemcmp;
using __ywlib_global wmemcpy;
using __ywlib_global wmemmove;
using __ywlib_global wmemset;
using __ywlib_global mbsinit;
using __ywlib_global btowc;
using __ywlib_global wctob;
using __ywlib_global mbrlen;
using __ywlib_global mbrtowc;
using __ywlib_global wcrtomb;
using __ywlib_global mbsrtowcs;
using __ywlib_global wcsrtombs;
using __ywlib_global getwc;
using __ywlib_global fgetwc;
using __ywlib_global fgetws;
using __ywlib_global putwc;
using __ywlib_global fputwc;
using __ywlib_global fputws;
using __ywlib_global getwchar;
using __ywlib_global putwchar;
using __ywlib_global ungetwc;
using __ywlib_global fwide;
using __ywlib_global wcstol;
using __ywlib_global wcstoll;
using __ywlib_global wcstoul;
using __ywlib_global wcstoull;
using __ywlib_global wcstof;
using __ywlib_global wcstod;
using __ywlib_global wcstold;
using __ywlib_global wcsftime;

using __ywlib_global vswscanf;
using __ywlib_global swscanf;

using __ywlib_global vfwscanf;
using __ywlib_global vwscanf;
using __ywlib_global fwscanf;
using __ywlib_global scanf;

using __ywlib_global vswprintf;
using __ywlib_global swprintf;

using __ywlib_global vfwprintf;
using __ywlib_global vwprintf;
using __ywlib_global fwprintf;
using __ywlib_global wprintf;

inline wchar_t* wmemchr(wchar_t* s, wchar_t c, size_t n) noexcept {
  return const_cast<wchar_t*>(wmemchr(const_cast<const wchar_t*>(s), c, n)); }
inline wchar_t* wcschr(wchar_t* s, wchar_t c) noexcept {
  return const_cast<wchar_t*>(wcschr(const_cast<const wchar_t*>(s), c)); }
inline wchar_t* wcspbrk(wchar_t* s, const wchar_t* accept) noexcept {
  return const_cast<wchar_t*>(wcspbrk(const_cast<const wchar_t*>(s), accept)); }
inline wchar_t* wcsrchr(wchar_t* s, wchar_t c) noexcept {
  return const_cast<wchar_t*>(wcsrchr(const_cast<const wchar_t*>(s), c)); }
inline wchar_t* wcsstr(wchar_t* s, const wchar_t* find) noexcept {
  return const_cast<wchar_t*>(wcsstr(const_cast<const wchar_t*>(s), find)); }
}

////////////////////////////////////////////////////////////////////////////////
// for <string>

extern "C" {
__ywlib_begin;

inline int __cdecl _vscwprintf(const wchar_t* format, va_list args) {
  const auto options = _CRT_INTERNAL_LOCAL_PRINTF_OPTIONS | _CRT_INTERNAL_PRINTF_STANDARD_SNPRINTF_BEHAVIOR;
  const int result = __stdio_common_vswprintf(options, NULL, 0, format, nullptr, args);
  return result < 0 ? -1 : result; }
inline int __cdecl _scwprintf(const wchar_t* format, ...) {
  __ywlib_cstdio_va(format, (_vscwprintf(format, args))); }

int __cdecl __stdio_common_vswprintf_s(unsigned __int64, wchar_t*, size_t, const wchar_t*, _locale_t, va_list);
inline int __cdecl vswprintf_s(wchar_t* buffer, size_t count, const wchar_t* format, va_list args) {
  const auto options = _CRT_INTERNAL_LOCAL_PRINTF_OPTIONS;
  const int result = __stdio_common_vswprintf_s(options, buffer, count, format, nullptr, args);
  return result < 0 ? -1 : result; }
inline int __cdecl swprintf_s(wchar_t* buffer, size_t count, const wchar_t* format, ...) {
  __ywlib_cstdio_va(format, (vswprintf_s(buffer, count, format, args))); }


__ywlib_end;
}
